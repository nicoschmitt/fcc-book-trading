!function(){var o=angular.module("myApp");o.controller("addBookCtrl",["$scope","$http","$location","adalAuthenticationService",function(o,n,t,a){var e=this;e.loading=!1,e.searchBook="",e.message="",e.books=[];var i=function(o){e.loading=!1,e.message=o.data,console.log(o.data)};e.search=function(){e.message="",e.books=[],e.loading=!0,n.get("/api/search/"+e.searchBook).then(function(o){e.loading=!1,e.books=o.data},i)},e.add=function(o){console.log("Add book "+o.id),n.post("/api/book/"+o.id,o).then(function(o){t.path("/Home")},i)}}])}(),function(){var o=angular.module("myApp");o.controller("homeCtrl",["$scope","$http","$location","adalAuthenticationService",function(o,n,t,a){var e=this;e.loading=!0,e.message="",e.books=[];var i=function(o){e.loading=!1,e.message=o.data,console.log(o.data)};a.userInfo.isAuthenticated&&n.get("/api/book/my").then(function(o){e.loading=!1,e.books=o.data},i)}])}(),function(){var o=angular.module("myApp");o.controller("meCtrl",["$scope","$http","$location","adalAuthenticationService",function(o,n,t,a){var e=this;e.loading=!0,e.message="",e.user={email:a.userInfo.profile.email,name:a.userInfo.profile.name,country:"",city:""};var i=function(o){e.loading=!1,e.message=o.data,console.log(o.data)};e.update=function(){console.log(e.user),e.loading=!0,n.post("/api/user/"+e.user.email,e.user).then(function(o){e.loading=!1,e.user=o.data,e.user.email=e.user._id},i)},n.post("/api/user/",e.user).then(function(o){e.loading=!1,e.user=o.data,e.user.email=e.user._id},i)}])}(),function(){var o=angular.module("myApp");o.controller("otherBooksCtrl",["$scope","$http","$location","adalAuthenticationService",function(o,n,t,a){var e=this;e.loading=!0,e.message="",e.books=[];var i=function(o){e.loading=!1,e.message=o.data,console.log(o.data)};a.userInfo.isAuthenticated&&n.get("/api/book/other").then(function(o){e.loading=!1,e.books=o.data},i)}])}(),function(){var o=angular.module("myApp");o.controller("topNavCtrl",["$scope","$location","adalAuthenticationService","$http",function(o,n,t,a){var e=this;e.login=function(){t.login()},e.logout=function(){t.logout()},e.getUsername=function(){var o=t.userInfo.isAuthenticated;return o&&t.userInfo.profile.name||""},e.isActive=function(o){return o===n.path()},o.$on("adal:loginSuccess",function(){console.log("login"),console.log(t.userInfo),a.post("/api/user/",t.userInfo).then(function(o){})}),o.$on("adal:loginFailure",function(){console.log("login failure")})}]),o.directive("topNav",function(){return{restrict:"E",templateUrl:"/app/views/top-nav.html",controller:"topNavCtrl",controllerAs:"nav"}})}(),function(){var o=angular.module("myApp");o.controller("tradesCtrl",["$scope","$http","$location","adalAuthenticationService",function(o,n,t,a){var e=this;e.loading=!0,e.message="",e.books=[];var i=function(o){e.loading=!1,e.message=o.data,console.log(o.data)};a.userInfo.isAuthenticated&&n.get("/api/book/my").then(function(o){e.loading=!1,e.books=o.data},i)}])}();